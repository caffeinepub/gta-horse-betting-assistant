{
  "kind": "build_request",
  "title": "Redesign Prediction Screen with Primary/Secondary Panel Layout",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-64",
      "text": "Redesign the PredictionAndResults component layout to display Strategy Mode prominently at the top, followed by a six-row display showing all odds with their corresponding real-time calculated implied probabilities (odds/implied pairs for contenders #1-#6)",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "Strategy Mode",
          "All odds + implied probabilities"
        ]
      },
      "acceptanceCriteria": [
        "Strategy Mode (Safe/Balanced/Value/Aggressive) is displayed at the top of the prediction screen",
        "All six odds values are displayed with their implied probabilities in a clear row or table format",
        "Each contender is labeled #1 through #6 with its odds and implied probability visible simultaneously"
      ]
    },
    {
      "id": "REQ-65",
      "text": "Create a Primary Panel section in PredictionAndResults that displays the recommended pick with the label 'BEST BET: #X' (where X is the contender number 1-6), showing Predicted Probability (adjusted probability from prediction engine), Implied Probability (baseline 1/odds), Value Edge (adjusted minus implied), Confidence Level (High/Medium/Low with visual indicator), and Recommended Bet (dollar amount with bet sizing logic)",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "Primary panel:",
          "BEST BET: #X",
          "Predicted Probability",
          "Implied Probability",
          "Value Edge",
          "Confidence",
          "Recommended Bet"
        ]
      },
      "acceptanceCriteria": [
        "Primary panel is visually distinct and prominent in the layout",
        "Best Bet label clearly shows the contender number (#1-#6) of the recommended pick",
        "Predicted Probability displays the adjusted probability calculated by the prediction engine",
        "Implied Probability shows the baseline 1/odds probability",
        "Value Edge shows the difference between predicted and implied probabilities",
        "Confidence level displays as High, Medium, or Low with appropriate visual styling",
        "Recommended Bet displays the calculated bet size in dollars"
      ]
    },
    {
      "id": "REQ-66",
      "text": "Create a Secondary Panel section in PredictionAndResults that displays a Signal Breakdown showing four individual signal contributions: Odds Signal (baseline probability contribution), Historical Bucket Signal (bucket win delta contribution), Recent Bucket Signal (recent session delta contribution), and Consistency Signal (consistency modifier contribution from variance)",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "Secondary panel:",
          "Signal breakdown: Odds signal",
          "Historical bucket signal",
          "Recent bucket signal",
          "Consistency signal"
        ]
      },
      "acceptanceCriteria": [
        "Secondary panel is clearly separated from the primary panel but still visible on the same screen",
        "Four distinct signals are displayed with clear labels",
        "Odds Signal shows the baseline implied probability contribution",
        "Historical Bucket Signal shows the adjustment from historical bucket performance (Bucket Win Delta)",
        "Recent Bucket Signal shows the adjustment from recent session performance (Recent Session Delta)",
        "Consistency Signal shows the adjustment from variance-based consistency modifier",
        "Signal values are presented numerically or as percentages with clear formatting"
      ]
    },
    {
      "id": "REQ-67",
      "text": "Add optional informational indicators to the PredictionAndResults screen showing 'Hot Odds Bucket' (the odds bucket with the best recent performance) and 'Trap Odds Bucket' (the odds bucket with the worst recent performance or highest variance), displaying these in a non-intrusive way that doesn't interfere with the primary workflow",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "Optional:",
          "Hot Odds Bucket",
          "Trap Odds Bucket"
        ]
      },
      "acceptanceCriteria": [
        "Hot Odds Bucket displays the odds range (1-2, 3-5, 6-10, or 11-30) with the best recent performance metrics",
        "Trap Odds Bucket displays the odds range with the worst recent performance or highest variance",
        "These indicators are visually distinct but secondary to the main prediction information",
        "Indicators use bucket statistics from oddsBucketStats to determine hot/trap status",
        "Display is optional and can be shown/hidden or placed in a collapsible section"
      ]
    },
    {
      "id": "REQ-68",
      "text": "Update the signal breakdown calculation logic in statsCalculator.ts to return individual signal components (odds signal, historical bucket signal, recent bucket signal, consistency signal) as separate numeric values that can be displayed in the Secondary Panel, ensuring these values represent the additive or multiplicative contributions to the final adjusted probability",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "Signal breakdown: Odds signal",
          "Historical bucket signal",
          "Recent bucket signal",
          "Consistency signal"
        ]
      },
      "acceptanceCriteria": [
        "Prediction engine function returns a signalBreakdown object containing four separate signal values",
        "Odds signal represents the baseline implied probability contribution (1/odds)",
        "Historical bucket signal represents the Bucket Win Delta adjustment weight",
        "Recent bucket signal represents the Recent Session Delta adjustment weight",
        "Consistency signal represents the variance-based consistency modifier weight",
        "Signal breakdown values are calculated for the recommended contender and passed to the UI"
      ]
    },
    {
      "id": "REQ-69",
      "text": "Restructure the PredictionAndResults component layout hierarchy to organize content into three distinct visual sections: (1) Header section with Strategy Mode and full odds/implied probability display, (2) Primary Panel with recommended bet details, (3) Secondary Panel with signal breakdown and optional bucket indicators, ensuring clear visual hierarchy and spacing between sections",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "Strategy Mode",
          "Primary panel:",
          "Secondary panel:",
          "Optional:"
        ]
      },
      "acceptanceCriteria": [
        "Three distinct sections are visually identifiable with appropriate spacing and borders/backgrounds",
        "Header section appears at the top and contains strategy mode and all odds/probabilities",
        "Primary Panel is prominently displayed with larger text and emphasis on the recommended bet",
        "Secondary Panel is below the Primary Panel but still easily readable",
        "Optional indicators (Hot/Trap buckets) are positioned below or alongside the Secondary Panel",
        "Layout is responsive and maintains hierarchy on different screen sizes",
        "Result logging interface (winner selection) remains accessible below the prediction display"
      ]
    }
  ],
  "constraints": [
    "Do not modify frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useActor.ts, frontend/src/main.tsx, or any files in frontend/src/components/ui",
    "Maintain the existing prediction engine logic in statsCalculator.ts; only extend it to expose individual signal components",
    "Keep the current race logging and result interface functionality intact",
    "Preserve the three-screen navigation architecture (Dashboard, Odds Entry, Prediction+Results)"
  ],
  "nonGoals": [
    "Changing the prediction algorithm or probability calculation formulas",
    "Modifying the strategy mode selection logic",
    "Altering the bet sizing algorithm",
    "Redesigning the odds entry screen",
    "Changing the backend Motoko actor implementation"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}